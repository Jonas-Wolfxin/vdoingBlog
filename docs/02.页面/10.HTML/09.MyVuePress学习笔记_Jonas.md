---
title: Test_Jonas
date: 2022-06-08 00:33:19
permalink: /pages/1f8b91/
categories:
  - 页面
  - HTML
tags:
  - 
author: 
  name: Jonas Wolfxin
  link: https://github.com/Jonas-Wolfxin
---
# 部署 VuePress

教程网址: https://www.bilibili.com/video/BV1vb411m7NY?p=1

## 安装基础环境

>   -   [git(版本管理)](ttps://git-scm.com/):
>       -   一直点击`Next`, 安装即可;
>   -   [cmder(可选; 因为可以使用 git bash 命令行来代替)](https://cmder.net/): 是Windows下非常好用的终端模拟器， 常用于替换windows自带的终端。
>   -   [node.js(核心)](https://nodejs.org/zh-cn/):
>       -   一直点击`Next`, 安装即可;
>   -   [yarn (npm包管理的替代工具)](https://classic.yarnpkg.com/lang/en/docs/install/#windows-stable): 
>       -   `npm install --global yarn`
>   -   [VsCode 编辑器](https://code.visualstudio.com/):
>       -   `勾选`将"通过Code打开"操作添加到Windows资源管理器文件的上下文菜单
>       -   `勾选`将"通过Code打开"操作添加到Windows资源管理器目录的上下文菜单

>   安装完成后, 通过查看以上工具的版本号, 来确认是否安装成功(以下命令均可以在Git Bash中执行):
>
>   -   `git --version`
>   -   `node -v`
>   -   `yarn -v`
>   -   `code .`

## VuePress 初体验

[VuePress 官网](https://www.vuepress.cn/)

### Github 上创建一个仓库并克隆到本地

1.   注册以及登录Github 账号的过程省略;

2.   create a new repository;

     ![image-20220608015304036](https://cdn.jsdelivr.net/gh/Wolfxin/MyPicGo/img/202206080153112.png)

3.   使用 Git Bash命令行将此仓库克隆到本地

     1.   在本地创建一个文件夹(英文名), 用于存放该仓库;
     2.   在此文件夹内运行Git Bash, `git clone https://github.com/Jonas-Wolfxin/MyVuePress.git`;
     3.   ` cd ./MyVuePress/`, 进入该仓库;

### [安装 VuePress](https://www.vuepress.cn/): 

1.   (不需要在创建新目录); 因为直接使用以及初始化这个仓库文件夹即可;

     ```shell
     code .
     npm init -y  # 会生成 package.json 这个文件
     ```

2.   将 VuePress 安装为本地依赖;

     ```shell
     yarn add -D vuepress   # 会生成 node_modules 文件夹 和 yarn.lock 文件
     ```

3.   `mkdir docs && echo '# Hello MyVuePress' >> docs/README.md`: 向 `docs/README.md` 文件中添加内容;

4.   在 `package.json` 中添加一些 [scripts](https://classic.yarnpkg.com/zh-Hans/docs/package-json#toc-scripts): 

     -   方便 命令行简化使用; 严格注意逗号等格式; 此json文件中不允许有注释

     ```shell
     {
       "scripts": {
         "dev": "vuepress dev docs --temp .temp",
         "build": "vuepress build docs"
       }
     }
     ```

​	上方代码不支持 热重载, 借鉴[这个帖子](https://www.csdn.net/tags/OtTagg1sNjY2NjItYmxvZwO0O0OO0O0O.html): `"dev": "vuepress dev docs --temp .temp",`

5.   `yarn dev`:本地启动 服务器; VuePress 会在 [http://localhost:8080](http://localhost:8080/)启动一个热重载的开发服务器。



### 首页的默认主题配置

1.   [首页的默认主题配置](https://www.vuepress.cn/theme/default-theme-config.html): vscode 打开 `docs/README.md`文件, 并在首行添加:

     ```markdown
     ---
     home: true
     # heroImage: /hero.png
     heroText: Hero 标题
     tagline: Hero 副标题
     actionText: 快速上手 →
     actionLink: /zh/guide/
     features:
     - title: 简洁至上
       details: 以 Markdown 为中心的项目结构，以最少的配置帮助你专注于写作。
     - title: Vue驱动
       details: 享受 Vue + webpack 的开发体验，在 Markdown 中使用 Vue 组件，同时可以使用 Vue 来开发自定义主题。
     - title: 高性能
       details: VuePress 为每个页面预渲染生成静态的 HTML，同时在页面被加载的时候，将作为 SPA 运行。
     footer: MIT Licensed | Copyright © 2018-present Evan You
     ---
     ```

2.   停止 服务器: `Ctrl + C`; 重新启动 服务器 `yarn docs:dev`;



## 导航栏的设置

### 认识一下[目录结构](https://www.vuepress.cn/guide/directory-structure.html):

VuePress 遵循 **“约定优于配置”** 的原则，推荐的目录结构如下：

```sh
.
├── docs
│   ├── .vuepress (可选的)
│   │   ├── components (可选的)
│   │   ├── theme (可选的)
│   │   │   └── Layout.vue
│   │   ├── public (可选的)
│   │   ├── styles (可选的)
│   │   │   ├── index.styl
│   │   │   └── palette.styl
│   │   ├── templates (可选的, 谨慎配置)
│   │   │   ├── dev.html
│   │   │   └── ssr.html
│   │   ├── config.js (可选的)
│   │   └── enhanceApp.js (可选的)
│   │ 
│   ├── README.md
│   ├── guide
│   │   └── README.md
│   └── config.md
│ 
└── package.json
```

>   注意: 请留意目录名的大写。

-   `docs/.vuepress`: 用于存放全局的配置、组件、静态资源等。
-   `docs/.vuepress/components`: 该目录中的 Vue 组件将会被自动注册为全局组件。
-   `docs/.vuepress/theme`: 用于存放本地主题。
-   `docs/.vuepress/styles`: 用于存放样式相关的文件。
-   `docs/.vuepress/styles/index.styl`: 将会被自动应用的全局样式文件，会生成在最终的 CSS 文件结尾，具有比默认样式更高的优先级。
-   `docs/.vuepress/styles/palette.styl`: 用于重写默认颜色常量，或者设置新的 stylus 颜色常量。
-   `docs/.vuepress/public`: 静态资源目录。
-   `docs/.vuepress/templates`: 存储 HTML 模板文件。
-   `docs/.vuepress/templates/dev.html`: 用于开发环境的 HTML 模板文件。
-   `docs/.vuepress/templates/ssr.html`: 构建时基于 Vue SSR 的 HTML 模板文件。
-   `docs/.vuepress/config.js`: 配置文件的入口文件，也可以是 `YML` 或 `toml`。
-   `docs/.vuepress/enhanceApp.js`: 客户端应用的增强。

>   注意:
>
>   当你想要去自定义 `templates/ssr.html` 或 `templates/dev.html` 时，最好基于 [默认的模板文件 (opens new window)](https://github.com/vuejs/vuepress/blob/master/packages/%40vuepress/core/lib/client/index.dev.html)来修改，否则可能会导致构建出错。

#### 默认的页面路由

此处我们把 `./docs/` 目录作为 `targetDir` （参考 [命令行接口](https://www.vuepress.cn/api/cli.html#基本用法)），下面所有的“文件的相对路径”都是相对于 `docs` 目录的。对于上述的目录结构，默认页面路由地址如下：

| 文件的相对路径     | 页面路由地址   |
| ------------------ | :------------- |
| `/README.md`       | `/`            |
| `/guide/README.md` | `/guide/`      |
| `/config.md`       | `/config.html` |

### 导航栏的配置

[指南地址:](https://www.vuepress.cn/theme/default-theme-config.html#%E5%AF%BC%E8%88%AA%E6%A0%8F) 

1.   [导航栏 logo: ](https://www.vuepress.cn/theme/default-theme-config.html#%E5%AF%BC%E8%88%AA%E6%A0%8F-logo)
2.   [导航栏链接](https://www.vuepress.cn/theme/default-theme-config.html#%E5%AF%BC%E8%88%AA%E6%A0%8F%E9%93%BE%E6%8E%A5)
3.   [禁用导航栏](https://www.vuepress.cn/theme/default-theme-config.html#%E7%A6%81%E7%94%A8%E5%AF%BC%E8%88%AA%E6%A0%8F)

## 侧边栏的配置

### 文章的目录 ToC

[自动生成侧栏](https://www.vuepress.cn/theme/default-theme-config.html#%E4%BE%A7%E8%BE%B9%E6%A0%8F): 如果你希望自动生成一个仅仅包含了当前页面标题（headers）链接的侧边栏，你可以通过 `YAML front matter` 来实现：

```yaml
---
sidebar: auto
---
```

你也可以通过配置来在*所有页面*中启用它：

```js
// .vuepress/config.js
module.exports = {
  themeConfig: {
    sidebar: 'auto'
  }
}
```

在 [多语言](https://www.vuepress.cn/guide/i18n.html) 模式下, 你也可以将其应用到某一特定的语言下：

```js
// .vuepress/config.js
module.exports = {
  themeConfig: {
     '/zh/': {
       sidebar: 'auto'
     }
  }
}
```

### 站点文件系统导航

#### 侧边栏分组

你可以通过使用**对象**来将侧边栏划分成多个组：

```js
// .vuepress/config.js
module.exports = {
  themeConfig: {
    sidebar: [
      {
        title: 'Group 1',   // 必要的
        path: '/foo/',      // 可选的, 标题的跳转链接，应为绝对路径且必须存在
        collapsable: false, // 可选的, 默认值是 true,
        sidebarDepth: 1,    // 可选的, 默认值是 1
        children: [
          '/'
        ]
      },
      {
        title: 'Group 2',
        children: [ /* ... */ ],
        initialOpenGroupIndex: -1 // 可选的, 默认值是 0
      }
    ]
  }
}
```

侧边栏的每个子组默认是可折叠的，你可以设置 `collapsable: false` 来让一个组永远都是展开状态。

一个侧边栏的子组配置同时支持 [sidebarDepth](https://www.vuepress.cn/theme/default-theme-config.html#nested-header-links) 字段用于重写默认显示的侧边栏深度(`1`)。

TIP

嵌套的侧边栏分组也是支持的。

#### 多个侧边栏

如果你想为不同的页面组来显示不同的侧边栏，首先，将你的页面文件组织成下述的目录结构：

```text
.
├─ README.md
├─ contact.md
├─ about.md
├─ foo/
│  ├─ README.md
│  ├─ one.md
│  └─ two.md
└─ bar/
   ├─ README.md
   ├─ three.md
   └─ four.md
```

接着，遵循以下的侧边栏配置：

```js
// .vuepress/config.js
module.exports = {
  themeConfig: {
    sidebar: {
      '/foo/': [
        '',     /* /foo/ */
        'one',  /* /foo/one.html */
        'two'   /* /foo/two.html */
      ],

      '/bar/': [
        '',      /* /bar/ */
        'three', /* /bar/three.html */
        'four'   /* /bar/four.html */
      ],

      // fallback
      '/': [
        '',        /* / */
        'contact', /* /contact.html */
        'about'    /* /about.html */
      ]
    }
  }
}
```

>   WARNING
>
>   确保 fallback 侧边栏被最后定义。VuePress 会按顺序遍历侧边栏配置来寻找匹配的配置。



### 作者的插件: 

[网址](https://www.npmjs.com/package/vuepress-plugin-auto-sidebar)

>   ```
>   module.exports = {
>     plugins: {
>       "vuepress-plugin-auto-sidebar": {}
>     }
>   }
>   ```
>
>   📖 **For more detailed documentation, you can visit [vuepress-plugin-auto-sidebar](https://shanyuhai123.github.io/vuepress-plugin-auto-sidebar)。**
>
>   ### 1. Simple Navbar
>
>   We have extended `vuepress cli` to help you quickly generate a simple navigation bar, [how to use it](https://shanyuhai123.github.io/vuepress-plugin-auto-sidebar/features/plugin-options.html#nav):
>
>   ```shell
>   yarn vuepress nav docs
>   ```

## SEO & [配置](https://www.vuepress.cn/config/#%E5%9F%BA%E6%9C%AC%E9%85%8D%E7%BD%AE)

SEO: 利用搜索引擎的规则提高网站在有关搜索引擎内的自然排名。

-   title: 网站的标题，它将会被用作所有页面标题的前缀，同时，默认主题下，它将显示在导航栏（navbar）上;

-   description: 

-   head: 

    -   类型: `Array`
    -   默认值: `[]`

    额外的需要被注入到当前页面的 HTML `<head>` 中的标签，每个标签都可以以 `[tagName, { attrName: attrValue }, innerHTML?]` 的格式指定，举个例子，增加一个自定义的 [favicon](https://favicon.io/)：

    ```js
    module.exports = {
      head: [
        ['label名', { 属性名: '属性值', 属性名: '属性值' }]
        ['link', { rel: 'icon', href: '/logo.png' }]
      ]
    }
    ```

## Last update

[网址: ](https://www.vuepress.cn/theme/default-theme-config.html#%E6%9C%80%E5%90%8E%E6%9B%B4%E6%96%B0%E6%97%B6%E9%97%B4)

你可以通过 `themeConfig.lastUpdated` 选项来获取每个文件最后一次 `git` 提交的 UNIX 时间戳(ms)，同时它将以合适的日期格式显示在每一页的底部：

```js
// .vuepress/config.js
module.exports = {
  themeConfig: {
    lastUpdated: 'Last Updated', // string | boolean
  }
}
```

请注意，`themeConfig.lastUpdated` 默认是关闭的，如果给定一个字符串，它将会作为前缀显示（默认值是：`Last Updated`）。

使用须知

由于 `lastUpdated` 是基于 `git` 的, 所以你只能在一个基于 `git` 的项目中启用它。此外，由于使用的时间戳来自 git commit，因此它将仅在给定页的第一次提交之后显示，并且仅在该页面后续提交更改时更新。

**拓展阅读:** [@vuepress/plugin-last-updated](https://www.vuepress.cn/plugin/official/plugin-last-updated.html)

1.   安装包 moment `yarn add moment`;

2.   配置:  (可以参考官网: https://momentjs.com/)

     ```javascript
     const moment = require('moment');
     
     module.exports = {
       plugins: [
         [
           '@vuepress/last-updated',
           {
             transformer: (timestamp, lang) => {
               // 不要忘了安装 moment,  yarn add moment
               const moment = require('moment')
               moment.locale(lang)
               return moment(timestamp).format("LLLL")
             }
           }
         ]
       ]
     }
     ```



## 部署到 github.io

https://www.vuepress.cn/guide/deploy.html

## GitHub Pages

1.  在 `docs/.vuepress/config.js` 中的 `module.exports`内设置正确的 `base`。

    -   如果你打算发布到 `https://<USERNAME>.github.io/`，则可以省略这一步，因为 `base` 默认即是 `"/"`。

    -   如果你打算发布到 `https://<USERNAME>.github.io/<REPO>/`（也就是说你的仓库在 `https://github.com/<USERNAME>/<REPO>`），则将 `base` 设置为 `"/<REPO>/"`。

        ![image-20220608134902713](https://cdn.jsdelivr.net/gh/Wolfxin/MyPicGo/img/202206081349854.png)

2.  在你的项目中，创建一个如下的 `deploy.sh` 文件（请自行判断去掉高亮行的注释）:

```bash
#!/usr/bin/env sh

# 确保脚本抛出遇到的错误
set -e

# 生成静态文件
npm run build

# 进入生成的文件夹
cd docs/.vuepress/dist

# 如果是发布到自定义域名
# echo 'www.example.com' > CNAME

git init
git add -A
git commit -m 'deploy'

# 如果发布到 https://<USERNAME>.github.io
# git push -f git@github.com:<USERNAME>/<USERNAME>.github.io.git master

# 如果发布到 https://<USERNAME>.github.io/<REPO>
# git push -f git@github.com:<USERNAME>/<REPO>.git master:gh-pages

cd -
```

TIP

你可以在你的持续集成的设置中，设置在每次 push 代码时自动运行上述脚本。

## PWA

参考链接: https://segmentfault.com/a/1190000041422357

### 安装

插件地址：[https://v1.vuepress.vuejs.org/zh/plugin/official/plugin-pwa.html](https://link.segmentfault.com/?enc=ZyDgUfPhG5YwdKA5tqeqxg%3D%3D.q0sHXDAdZQue%2BtTxwTUkV3qdBc27f7cmjv16kMAs6A1%2BBwmN3DE7nLG8RoOyjCJFAdhyPpfU1I5Y%2FY2wUpuXLiOCXaoC%2FEH%2F0EhyO8PLDRIiPF65Z31vN8x1qCLW5DKk)

```bash
yarn add -D @vuepress/plugin-pwa
# OR npm install -D @vuepress/plugin-pwa
```

### 修改 config.js

```javascript
module.exports = {
  head: [
    ['link', { rel: 'icon', href: '/logo.png' }],
    ['link', { rel: 'manifest', href: '/manifest.json' }],
    ['meta', { name: 'theme-color', content: '#3eaf7c' }],
    ['meta', { name: 'apple-mobile-web-app-capable', content: 'yes' }],
    ['meta', { name: 'apple-mobile-web-app-status-bar-style', content: 'black' }],
    ['link', { rel: 'apple-touch-icon', href: '/icons/apple-touch-icon-152x152.png' }],
    ['link', { rel: 'mask-icon', href: '/icons/safari-pinned-tab.svg', color: '#3eaf7c' }],
    ['meta', { name: 'msapplication-TileImage', content: '/icons/msapplication-icon-144x144.png' }],
    ['meta', { name: 'msapplication-TileColor', content: '#000000' }]
  ],
  plugins: [
    [
      '@vuepress/pwa',
      {
        serviceWorker: true,
        updatePopup: {
            message: "发现新内容可用",
            buttonText: "刷新"
        }
     }
    ]
  ]
}
```

### 添加 manifest.json 等资源

接下来我们添加所需要的资源，在 `.vuepress`目录下建立 `public`文件夹，然后添加所需要的文件如 `manifest.json`文件：

```json
{
    "theme_color": "#f69435",
    "background_color": "#f69435",
    "display": "standalone",
    "scope": "/MyVuePress/",
    "start_url": "/MyVuePress/",
    "name": "Jonas Wolfxin",
    "short_name": "Jonas",
    "icons": [
        {
            "src": "/icon-192x192.png",
            "sizes": "192x192",
            "type": "image/png"
        },
        {
            "src": "/icon-256x256.png",
            "sizes": "256x256",
            "type": "image/png"
        },
        {
            "src": "/icon-384x384.png",
            "sizes": "384x384",
            "type": "image/png"
        },
        {
            "src": "/icon-512x512.png",
            "sizes": "512x512",
            "type": "image/png"
        }
    ]
}
```

这其中字段的具体含义，可以查看 MDN 的 [Manifest 介绍](https://link.segmentfault.com/?enc=1V9dVdIWOboOo5DiggHT4A%3D%3D.n2DF%2Fd8DZ1LR51%2BisUB34xfxR0usSsa0vY8VdyNBdw13jCVa5UH9Rx9QHcR1r31VKoesyToiOlKUBvIJShclnQ%3D%3D)。

要注意其中的 `start_url`和`scope`，

-   如果你使用的是 GitHub 或者 Gitee 仓库的 Pages 服务，并且地址上带了仓库名，你需要将这里的`MyVuePress`替换为你的仓库名; 
-   如果是直接的域名，start_url 写成 `\`，`scope`写成 `.`或者直接不写。

然后是补齐所需要的图标图片：

![img](https://cdn.jsdelivr.net/gh/Wolfxin/MyPicGo/img/202206082002510.png)

### 部署生产环境测

虽然我们在上篇[《VuePress 博客如何开启本地 HTTPS 访问》](https://link.segmentfault.com/?enc=ZzLI51%2FXsGP1LkExkhQPrg%3D%3D.S5obmqNbz4I0GEfTV5tEK07sNs%2FvJ1%2FUg7d5iWPtPGPtHUQd9YcL5EwUr%2B4V54YC) 讲了如何在本地开启 HTTPS，但是因为我们使用的这个[插件](https://link.segmentfault.com/?enc=o5Ido6QxzFU3iQlIDKfm8w%3D%3D.UZ1xRH53JxgqSYRfYJqbOD6IZjEG0ol2lwPqdfeGYS728nh75CzlozCNDGLsEOX%2Fil3VesDKV72uNnwCSzElO19TS8CwGXq7aQGTuirnXplsvNMM9FS5TRLKJHUEbRmX)只有在生产环境才会开启 Service Worker：

![img](https://cdn.jsdelivr.net/gh/Wolfxin/MyPicGo/img/202206082002289.png)

所以呢，我们部署到线上看一下效果，如果顺利的话，你就会看到地址栏上也出现了安装图标：

![img](https://segmentfault.com/img/remote/1460000041422365)

## 评论插件 vssue

### 创建 OAuth App

https://vssue.js.org/zh/guide/github.html#%E5%88%9B%E5%BB%BA%E4%B8%80%E4%B8%AA%E6%96%B0%E7%9A%84-oauth-app

### 安装 插件

```bash
yarn add @vssue/vuepress-plugin-vssue
yarn add @vssue/api-github-v4
```

### 配置插件

```bash
// .vuepress/config.js

module.exports = {
	'@vssue/vuepress-plugin-vssue': {
		// 设置 `platform` 而不是 `api`
      	platform: 'github-v4',

        // 其他的 Vssue 配置
        owner: 'Jonas-Wolfxin',
        repo: 'MyVuePress',
        clientId: '136c994113d3e81e9067',
        clientSecret: '8eb6fdbf254e0b49d7a01c89c202e6d96278d1b9',
        autoCreateIssue: true,
	}
};
```

### 启用 评论插件

##### 单页面启用评论插件

在 .md 底部 输入 `<Vssue />`

##### 全局启用插件

 有错误!!



## back-top

### 安装

```bash
yarn add -D @vuepress/plugin-back-to-top
# OR npm install -D @vuepress/plugin-back-to-top
```

### 使用

```javascript
module.exports = {
  plugins: ['@vuepress/back-to-top']
}
```

## Google Analytics



## 